<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  redis简单入门及实现wordpress数据库缓存 - 笔记仓库
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="笔记仓库" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">笔记仓库</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 笔记仓库</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>1.老男孩学习笔记</label></li>

          
            <li><a title="卅七、zabbix自主监控与分布式监控" href="15053046720339.html">卅七、zabbix自主监控与分布式监控</a></li>
          
            <li><a title="卅六、zabbix自定义监控" href="15053033256965.html">卅六、zabbix自定义监控</a></li>
          
            <li><a title="卅五、centOS6.9部署zabbix" href="15053026350545.html">卅五、centOS6.9部署zabbix</a></li>
          
            <li><a title="卅三、PPTP实现VPN" href="15052974923145.html">卅三、PPTP实现VPN</a></li>
          
            <li><a title="卅四、openvpn安装与使用" href="15052960182182.html">卅四、openvpn安装与使用</a></li>
          
            <li><a title="卅二、NTP时间服务" href="15052921723963.html">卅二、NTP时间服务</a></li>
          
            <li><a title="卅一、Keepalived部署" href="15051477961930.html">卅一、Keepalived部署</a></li>
          
            <li><a title="三十、Nginx应用--反向代理--负载均衡" href="15051475777273.html">三十、Nginx应用--反向代理--负载均衡</a></li>
          
            <li><a title="廿九、数据库迁移--NFS迁移" href="15051466954965.html">廿九、数据库迁移--NFS迁移</a></li>
          
            <li><a title="廿八、MySQL基本操作" href="15051459212797.html">廿八、MySQL基本操作</a></li>
          
            <li><a title="廿七、单台服务器LNMP搭建" href="15051418147758.html">廿七、单台服务器LNMP搭建</a></li>
          
            <li><a title="廿六、Nginx应用--Web服务" href="15051387894730.html">廿六、Nginx应用--Web服务</a></li>
          
            <li><a title="卌二、KVM" href="15050197248657.html">卌二、KVM</a></li>
          
            <li><a title="卌一、CentOS 7" href="15050196529102.html">卌一、CentOS 7</a></li>
          
            <li><a title="四十、自动化安装 (二) -- cobbler" href="15050165021812.html">四十、自动化安装 (二) -- cobbler</a></li>
          
            <li><a title="卅九、自动批量的安装操作系统 -- kickstart" href="15050152527420.html">卅九、自动批量的安装操作系统 -- kickstart</a></li>
          
            <li><a title="卅八、memcache及session共享" href="15049674009290.html">卅八、memcache及session共享</a></li>
          
            <li><a title="廿五、Nginx入门" href="15047113618478.html">廿五、Nginx入门</a></li>
          
            <li><a title="廿四、网站访问相关命令" href="15046800151297.html">廿四、网站访问相关命令</a></li>
          
            <li><a title="廿三、http协议==超文本传输协议" href="15045988807012.html">廿三、http协议==超文本传输协议</a></li>
          
            <li><a title="廿二、ansible" href="15018692235223.html">廿二、ansible</a></li>
          
            <li><a title="廿一、远程连接" href="15018686711597.html">廿一、远程连接</a></li>
          
            <li><a title="廿十、实时同步服务知识介绍(inotify+rsync)" href="15018676996592.html">廿十、实时同步服务知识介绍(inotify+rsync)</a></li>
          
            <li><a title="十五、awk命令精讲" href="15018659093989.html">十五、awk命令精讲</a></li>
          
            <li><a title="十四、网络基础" href="15018658919010.html">十四、网络基础</a></li>
          
            <li><a title="十三、shell编程入门" href="15018640937342.html">十三、shell编程入门</a></li>
          
            <li><a title="十二、sed命令精讲" href="15018613071828.html">十二、sed命令精讲</a></li>
          
            <li><a title="十一、磁盘管理" href="15018474773088.html">十一、磁盘管理</a></li>
          
            <li><a title="十、用户管理" href="15018399397622.html">十、用户管理</a></li>
          
            <li><a title="九、定时任务" href="15018075128546.html">九、定时任务</a></li>
          
            <li><a title="七、文件属性" href="15017626488369.html">七、文件属性</a></li>
          
            <li><a title="五、Linux基础优化" href="15017614116406.html">五、Linux基础优化</a></li>
          
            <li><a title="八、Linux权限体系" href="15017603199663.html">八、Linux权限体系</a></li>
          
            <li><a title="十九、期中架构NFS知识讲解" href="15013159711138.html">十九、期中架构NFS知识讲解</a></li>
          
            <li><a title="十八、全网备份" href="15013155594594.html">十八、全网备份</a></li>
          
            <li><a title="十七、rsync课程讲解" href="15012425054241.html">十七、rsync课程讲解</a></li>
          
            <li><a title="十六、期中架构" href="15012368281486.html">十六、期中架构</a></li>
          
            <li><a title="六、目录结构" href="15010772533002.html">六、目录结构</a></li>
          
            <li><a title="四、远程连接排错" href="15010763542152.html">四、远程连接排错</a></li>
          
            <li><a title="一、计算机系统硬件核心知识" href="15010712824389.html">一、计算机系统硬件核心知识</a></li>
          
            <li><a title="二、Linux的发展过程与核心知识" href="15010697787307.html">二、Linux的发展过程与核心知识</a></li>
          

      
        <li class="divider"></li>
        <li><label>2.十五个必会的原理知识</label></li>

          
            <li><a title="15. 描述你维护过的大规模集群网站架构的设计原理" href="15010702959683.html">15. 描述你维护过的大规模集群网站架构的设计原理</a></li>
          
            <li><a title="14. 详细描述Linux权限管理体系" href="15010702850667.html">14. 详细描述Linux权限管理体系</a></li>
          
            <li><a title="13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理" href="15010702778892.html">13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理</a></li>
          
            <li><a title="12. 一致性哈西算法作用及原理" href="15010702692268.html">12. 一致性哈西算法作用及原理</a></li>
          
            <li><a title="11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择" href="15010702612275.html">11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择</a></li>
          
            <li><a title="10. Linux默认文件系统,文件删除原理" href="15010702550739.html">10. Linux默认文件系统,文件删除原理</a></li>
          
            <li><a title="09. 详细描述CDN工作原理以及购买服务后解析操作步骤" href="15010702488190.html">09. 详细描述CDN工作原理以及购买服务后解析操作步骤</a></li>
          
            <li><a title="08. keepalive高可用服务工作原理" href="15010702422822.html">08. keepalive高可用服务工作原理</a></li>
          
            <li><a title="07. memcached工作原理(内存管理机制)" href="15010702209182.html">07. memcached工作原理(内存管理机制)</a></li>
          
            <li><a title="06. lvs的4种模式工作原理" href="15010702152705.html">06. lvs的4种模式工作原理</a></li>
          
            <li><a title="05. Nginx配合PHP工作fastcgi工作原理" href="15010702085430.html">05. Nginx配合PHP工作fastcgi工作原理</a></li>
          
            <li><a title="04. MySQL主从同步原理" href="15010701999479.html">04. MySQL主从同步原理</a></li>
          
            <li><a title="03. TCP/IP的三次握手和四次挥手原理" href="15010701936255.html">03. TCP/IP的三次握手和四次挥手原理</a></li>
          
            <li><a title="02. http协议通信原理" href="15010701867065.html">02. http协议通信原理</a></li>
          
            <li><a title="01. DNS系统架构与解析原理" href="15010701752650.html">01. DNS系统架构与解析原理</a></li>
          

      
        <li class="divider"></li>
        <li><label>3.命令总结</label></li>

          
            <li><a title="inotifywait" href="15017603290224.html">inotifywait</a></li>
          
            <li><a title="Linux命令总结 (持续更新中)" href="15013198329902.html">Linux命令总结 (持续更新中)</a></li>
          

      
        <li class="divider"></li>
        <li><label>零散笔记</label></li>

          
            <li><a title="redis简单入门及实现wordpress数据库缓存" href="15052628837678.html">redis简单入门及实现wordpress数据库缓存</a></li>
          
            <li><a title="Linux下获取公网IP地址的方法" href="15051981760993.html">Linux下获取公网IP地址的方法</a></li>
          
            <li><a title="附录: 502和504错误" href="15051451335516.html">附录: 502和504错误</a></li>
          
            <li><a title="HTTP状态码列表" href="15021542293136.html">HTTP状态码列表</a></li>
          
            <li><a title="Ansible常用模块汇总" href="15021011169868.html">Ansible常用模块汇总</a></li>
          
            <li><a title="web服务基础" href="15020372614069.html">web服务基础</a></li>
          
            <li><a title="全网备份案例" href="15010886029579.html">全网备份案例</a></li>
          
            <li><a title="xinetd服务管理器" href="15010578989827.html">xinetd服务管理器</a></li>
          
            <li><a title="服务器简单优化" href="15010516186972.html">服务器简单优化</a></li>
          

      
        <li class="divider"></li>
        <li><label>考试题</label></li>

          
            <li><a title="期中架构之前复习考试" href="15013178849284.html">期中架构之前复习考试</a></li>
          

      
        <li class="divider"></li>
        <li><label>心情随笔</label></li>

          
            <li><a title="鸡汤" href="15050925305457.html">鸡汤</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>1.老男孩学习笔记</span></li>
                        
                          <li><a title="卅七、zabbix自主监控与分布式监控" href="15053046720339.html">卅七、zabbix自主监控与分布式监控</a></li>
                        
                          <li><a title="卅六、zabbix自定义监控" href="15053033256965.html">卅六、zabbix自定义监控</a></li>
                        
                          <li><a title="卅五、centOS6.9部署zabbix" href="15053026350545.html">卅五、centOS6.9部署zabbix</a></li>
                        
                          <li><a title="卅三、PPTP实现VPN" href="15052974923145.html">卅三、PPTP实现VPN</a></li>
                        
                          <li><a title="卅四、openvpn安装与使用" href="15052960182182.html">卅四、openvpn安装与使用</a></li>
                        
                          <li><a title="卅二、NTP时间服务" href="15052921723963.html">卅二、NTP时间服务</a></li>
                        
                          <li><a title="卅一、Keepalived部署" href="15051477961930.html">卅一、Keepalived部署</a></li>
                        
                          <li><a title="三十、Nginx应用--反向代理--负载均衡" href="15051475777273.html">三十、Nginx应用--反向代理--负载均衡</a></li>
                        
                          <li><a title="廿九、数据库迁移--NFS迁移" href="15051466954965.html">廿九、数据库迁移--NFS迁移</a></li>
                        
                          <li><a title="廿八、MySQL基本操作" href="15051459212797.html">廿八、MySQL基本操作</a></li>
                        
                          <li><a title="廿七、单台服务器LNMP搭建" href="15051418147758.html">廿七、单台服务器LNMP搭建</a></li>
                        
                          <li><a title="廿六、Nginx应用--Web服务" href="15051387894730.html">廿六、Nginx应用--Web服务</a></li>
                        
                          <li><a title="卌二、KVM" href="15050197248657.html">卌二、KVM</a></li>
                        
                          <li><a title="卌一、CentOS 7" href="15050196529102.html">卌一、CentOS 7</a></li>
                        
                          <li><a title="四十、自动化安装 (二) -- cobbler" href="15050165021812.html">四十、自动化安装 (二) -- cobbler</a></li>
                        
                          <li><a title="卅九、自动批量的安装操作系统 -- kickstart" href="15050152527420.html">卅九、自动批量的安装操作系统 -- kickstart</a></li>
                        
                          <li><a title="卅八、memcache及session共享" href="15049674009290.html">卅八、memcache及session共享</a></li>
                        
                          <li><a title="廿五、Nginx入门" href="15047113618478.html">廿五、Nginx入门</a></li>
                        
                          <li><a title="廿四、网站访问相关命令" href="15046800151297.html">廿四、网站访问相关命令</a></li>
                        
                          <li><a title="廿三、http协议==超文本传输协议" href="15045988807012.html">廿三、http协议==超文本传输协议</a></li>
                        
                          <li><a title="廿二、ansible" href="15018692235223.html">廿二、ansible</a></li>
                        
                          <li><a title="廿一、远程连接" href="15018686711597.html">廿一、远程连接</a></li>
                        
                          <li><a title="廿十、实时同步服务知识介绍(inotify+rsync)" href="15018676996592.html">廿十、实时同步服务知识介绍(inotify+rsync)</a></li>
                        
                          <li><a title="十五、awk命令精讲" href="15018659093989.html">十五、awk命令精讲</a></li>
                        
                          <li><a title="十四、网络基础" href="15018658919010.html">十四、网络基础</a></li>
                        
                          <li><a title="十三、shell编程入门" href="15018640937342.html">十三、shell编程入门</a></li>
                        
                          <li><a title="十二、sed命令精讲" href="15018613071828.html">十二、sed命令精讲</a></li>
                        
                          <li><a title="十一、磁盘管理" href="15018474773088.html">十一、磁盘管理</a></li>
                        
                          <li><a title="十、用户管理" href="15018399397622.html">十、用户管理</a></li>
                        
                          <li><a title="九、定时任务" href="15018075128546.html">九、定时任务</a></li>
                        
                          <li><a title="七、文件属性" href="15017626488369.html">七、文件属性</a></li>
                        
                          <li><a title="五、Linux基础优化" href="15017614116406.html">五、Linux基础优化</a></li>
                        
                          <li><a title="八、Linux权限体系" href="15017603199663.html">八、Linux权限体系</a></li>
                        
                          <li><a title="十九、期中架构NFS知识讲解" href="15013159711138.html">十九、期中架构NFS知识讲解</a></li>
                        
                          <li><a title="十八、全网备份" href="15013155594594.html">十八、全网备份</a></li>
                        
                          <li><a title="十七、rsync课程讲解" href="15012425054241.html">十七、rsync课程讲解</a></li>
                        
                          <li><a title="十六、期中架构" href="15012368281486.html">十六、期中架构</a></li>
                        
                          <li><a title="六、目录结构" href="15010772533002.html">六、目录结构</a></li>
                        
                          <li><a title="四、远程连接排错" href="15010763542152.html">四、远程连接排错</a></li>
                        
                          <li><a title="一、计算机系统硬件核心知识" href="15010712824389.html">一、计算机系统硬件核心知识</a></li>
                        
                          <li><a title="二、Linux的发展过程与核心知识" href="15010697787307.html">二、Linux的发展过程与核心知识</a></li>
                        

                    
                      <li class="side-title"><span>2.十五个必会的原理知识</span></li>
                        
                          <li><a title="15. 描述你维护过的大规模集群网站架构的设计原理" href="15010702959683.html">15. 描述你维护过的大规模集群网站架构的设计原理</a></li>
                        
                          <li><a title="14. 详细描述Linux权限管理体系" href="15010702850667.html">14. 详细描述Linux权限管理体系</a></li>
                        
                          <li><a title="13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理" href="15010702778892.html">13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理</a></li>
                        
                          <li><a title="12. 一致性哈西算法作用及原理" href="15010702692268.html">12. 一致性哈西算法作用及原理</a></li>
                        
                          <li><a title="11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择" href="15010702612275.html">11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择</a></li>
                        
                          <li><a title="10. Linux默认文件系统,文件删除原理" href="15010702550739.html">10. Linux默认文件系统,文件删除原理</a></li>
                        
                          <li><a title="09. 详细描述CDN工作原理以及购买服务后解析操作步骤" href="15010702488190.html">09. 详细描述CDN工作原理以及购买服务后解析操作步骤</a></li>
                        
                          <li><a title="08. keepalive高可用服务工作原理" href="15010702422822.html">08. keepalive高可用服务工作原理</a></li>
                        
                          <li><a title="07. memcached工作原理(内存管理机制)" href="15010702209182.html">07. memcached工作原理(内存管理机制)</a></li>
                        
                          <li><a title="06. lvs的4种模式工作原理" href="15010702152705.html">06. lvs的4种模式工作原理</a></li>
                        
                          <li><a title="05. Nginx配合PHP工作fastcgi工作原理" href="15010702085430.html">05. Nginx配合PHP工作fastcgi工作原理</a></li>
                        
                          <li><a title="04. MySQL主从同步原理" href="15010701999479.html">04. MySQL主从同步原理</a></li>
                        
                          <li><a title="03. TCP/IP的三次握手和四次挥手原理" href="15010701936255.html">03. TCP/IP的三次握手和四次挥手原理</a></li>
                        
                          <li><a title="02. http协议通信原理" href="15010701867065.html">02. http协议通信原理</a></li>
                        
                          <li><a title="01. DNS系统架构与解析原理" href="15010701752650.html">01. DNS系统架构与解析原理</a></li>
                        

                    
                      <li class="side-title"><span>3.命令总结</span></li>
                        
                          <li><a title="inotifywait" href="15017603290224.html">inotifywait</a></li>
                        
                          <li><a title="Linux命令总结 (持续更新中)" href="15013198329902.html">Linux命令总结 (持续更新中)</a></li>
                        

                    
                      <li class="side-title"><span>零散笔记</span></li>
                        
                          <li><a title="redis简单入门及实现wordpress数据库缓存" href="15052628837678.html">redis简单入门及实现wordpress数据库缓存</a></li>
                        
                          <li><a title="Linux下获取公网IP地址的方法" href="15051981760993.html">Linux下获取公网IP地址的方法</a></li>
                        
                          <li><a title="附录: 502和504错误" href="15051451335516.html">附录: 502和504错误</a></li>
                        
                          <li><a title="HTTP状态码列表" href="15021542293136.html">HTTP状态码列表</a></li>
                        
                          <li><a title="Ansible常用模块汇总" href="15021011169868.html">Ansible常用模块汇总</a></li>
                        
                          <li><a title="web服务基础" href="15020372614069.html">web服务基础</a></li>
                        
                          <li><a title="全网备份案例" href="15010886029579.html">全网备份案例</a></li>
                        
                          <li><a title="xinetd服务管理器" href="15010578989827.html">xinetd服务管理器</a></li>
                        
                          <li><a title="服务器简单优化" href="15010516186972.html">服务器简单优化</a></li>
                        

                    
                      <li class="side-title"><span>考试题</span></li>
                        
                          <li><a title="期中架构之前复习考试" href="15013178849284.html">期中架构之前复习考试</a></li>
                        

                    
                      <li class="side-title"><span>心情随笔</span></li>
                        
                          <li><a title="鸡汤" href="15050925305457.html">鸡汤</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>redis简单入门及实现wordpress数据库缓存</h1>

<p>redis简介<br/>
Remote Dictionary Server（Redis）是一个基于 key-value 键值对的持久化数据库存储系统。支持多种数据结构，包括 string (字符串)、list (链表)、set (集合)、zset (sorted set --有序集合)和 hash（哈希类型）。<br/>
redis和memcached的区别<br/>
Redis和Memcache都是将数据存放在内存中，都是内存数据库。不过memcache还可用于缓存其他东西，例如图片、视频等等；<br/>
Redis不仅仅支持简单的k/v类型的数据，同时还提供list，set，hash等数据结构的存储；<br/>
虚拟内存--Redis当物理内存用完时，可以将一些很久没用到的value 交换到磁盘；<br/>
过期策略--memcache在set时就指定，例如set key1 0 0 8,即永不过期。Redis可以通过例如expire 设定，例如expire name 10；<br/>
分布式--设定memcache集群，利用magent做一主多从;redis可以做一主多从。<br/>
存储数据安全--memcache挂掉后，数据没了；redis可以定期保存到磁盘（持久化）；<br/>
灾难恢复--memcache挂掉后，数据不可恢复; redis数据丢失后可以恢复；<br/>
Redis支持数据的备份，即master-slave模式的数据备份；<br/>
应用场景不一样：Redis除了作为NoSQL数据库使用外，还能用做消息队列、数据堆栈和数据缓存等；Memcached适合于缓存SQL语句、数据集、用户临时性数据、延迟查询数据和session等<br/>
性能对比：由于Redis只使用单核，而Memcached可以使用多核，所以平均每一个核上Redis在存储小数据时比Memcached性能更高。而在100k以上的数据中，Memcached性能要高于Redis，虽然Redis最近也在存储大数据的性能上进行优化，但是比起 Memcached，还是稍有逊色。<br/>
内存使用效率对比：使用简单的key-value存储的话，Memcached的内存利用率更高，而如果Redis采用hash结构来做key-value存储，由于其组合式的压缩，其内存利用率会高于Memcached。<br/>
Redis支持服务器端的数据操作：Redis相比Memcached来说，拥有更多的数据结构和并支持更丰富的数据操作，通常在Memcached 里，你需要将数据拿到客户端来进行类似的修改再set回去。这大大增加了网络IO的次数和数据体积。在Redis中，这些复杂的操作通常和一般的 GET/SET一样高效。所以，如果需要缓存能够支持更复杂的结构和操作，那么Redis会是不错的选择。<br/>
redis服务端的安装<br/>
中文帮助文档<br/>
<a href="http://redisdoc.com/">http://redisdoc.com/</a><br/>
在lb01   10.0.0.5（172.16.1.5）上操作：<br/>
下载地址：<br/>
wget  <a href="http://download.redis.io/releases/redis-3.2.10.tar.gz">http://download.redis.io/releases/redis-3.2.10.tar.gz</a><br/>
安装：<br/>
tar zxf redis-3.2.10.tar.gz <br/>
cd redis-3.2.10<br/>
make<br/>
make install<br/>
拷贝启动文件：<br/>
cd utils/<br/>
cp redis_init_script /etc/init.d/redis<br/>
chmod +x /etc/init.d/redis<br/>
拷贝配置文件：<br/>
mkdir /etc/redis<br/>
cd ..<br/>
cp redis.conf /etc/redis/6379.conf<br/>
/etc/init.d/redis start<br/>
此时会看到redis是在前台运行需要修改配置文件让其在后台运行并且开启持久化：<br/>
持久化有两种方式：<br/>
1.rdb（快照默认开启）二进制文件<br/>
2.aof（类似于mysql的binlog功能）操作语句保存在文件中<br/>
sed -i &#39;s/daemonize no/daemonize yes/;s/appendonly no/appendonly yes/;163c logfile &quot;/var/log/redis.log&quot;&#39; /etc/redis/6379.conf<br/>
sed -i &#39;247c dir  /tmp&#39; /etc/redis/6379.conf<br/><br/>
sed -i &#39;s/bind 127.0.0.1/bind 127.0.0.1 172.16.1.5 /g&#39; /etc/redis/6379.conf<br/>
/etc/init.d/redis start<br/>
查看端口是否启动成功：<br/>
[root@lb01 ~]# netstat -lntup|grep redis<br/>
tcp        0      0 127.0.0.1:6379              0.0.0.0:*                   LISTEN      58534/redis-server<br/>
测试：<br/>
[root@lb01 ~]# redis-cli <br/>
127.0.0.1:6379&gt; set key1 hellword<br/>
OK<br/>
127.0.0.1:6379&gt; get key1<br/>
&quot;hellword&quot;<br/>
127.0.0.1:6379&gt; quit<br/>
查看帮助：<br/>
redis-cli --help<br/>
安装redis php客户端<br/>
下载地址：<br/>
wget <a href="http://pecl.php.net/get/redis-2.2.3.tgz">http://pecl.php.net/get/redis-2.2.3.tgz</a><br/>
添加模块<br/>
tar zxf redis-2.2.3.tgz<br/>
cd redis-2.2.3<br/>
/application/php/bin/phpize<br/>
./configure --with-php-config=/application/php/bin/php-config<br/>
make &amp;&amp; make install<br/>
修改配置文件并重启<br/>
echo &quot;extension = redis.so&quot; &gt;&gt;/application/php/lib/php.ini<br/>
killall php-fpm<br/>
/application/php/sbin/php-fpm<br/>
wordpress实现redis数据库缓存<br/>
需要一个客户端开发包以便PHP可以连接到redis服务端 ，这里推荐predis. 加入WordPress的根目录，执行下面<br/>
cd /application/nginx/html/blog wget <a href="http://uploads.staticjw.com/ji/jim/predis.php">http://uploads.staticjw.com/ji/jim/predis.php</a>  chown nginx.nginx predis.php<br/>
前端缓存的PHP脚本，加入WordPress的根目录，执行下面<br/>
wget <a href="https://gist.githubusercontent.com/JimWestergren/3053250/raw/d9e279e31cbee4a1520f59108a4418ae396b2dde/index-with-redis.php">https://gist.githubusercontent.com/JimWestergren/3053250/raw/d9e279e31cbee4a1520f59108a4418ae396b2dde/index-with-redis.php</a>  chown nginx.nginx index-with-redis.php<br/>
根据自己需求修改index-with-redis.php，修改如下：<br/>
\(cf = 0;                // set to 1 if you are using cloudflare  \)debug = 1;              // set to 1 if you wish to see execution time and cache actions  $display_powered_by_redis = 0; // set to 1 if you want to display a powered by redis message with execution time, see below<br/>
替换index.php<br/>
 mv index.php index.php.bak   mv index-with-redis.php index.php<br/>
修改predis文件信息<br/>
sed -i &#39;s/127.0.0.1/172.16.1.5/g&#39; predis.php<br/>
[root@web02 blog]# grep 172.16.1.5 predis.php <br/>
    const DEFAULT_HOST = &#39;172.16.1.5&#39;;<br/>
打开网页测试：<br/>
在redis服务器执行：<br/>
[root@lb01 ~]# redis-cli -h 172.16.1.5<br/>
172.16.1.5:6379&gt; keys *<br/>
1) &quot;count&quot;<br/>
2) &quot;key1&quot;<br/>
3) &quot;feaeb784f8a27e2af7166667a5f084fb&quot;<br/>
[root@lb01 tmp]# tail -5 /tmp/appendonly.aof<br/><br/>
<script type='text/javascript' src='http://blog.etiantian.org/wp-content/themes/twentysixteen/js/functions.js?ver=20160816'></script><br/>
<script type='text/javascript' src='http://blog.etiantian.org/wp-includes/js/wp-embed.min.js?ver=4.8.1'></script><br/>
</body><br/>
</html><br/>
redis实现session共享<br/>
修改php的配置文件php.ini<br/>
session.save_handler = redis<br/>
session.save_path = &quot;tcp://172.16.1.5:6379&quot;<br/>
重启php即可<br/>
redis的主从复制<br/>
Redis全量复制一般发生在Slave初始化阶段，这时Slave需要将Master上的所有数据都复制一份。具体步骤如下：</p>

<p>从服务器连接主服务器，发送SYNC命令；<br/>
 主服务器接收到SYNC命名后，开始执行BGSAVE命令生成RDB文件并使用缓冲区记录此后执行的所有写命令；<br/>
 主服务器BGSAVE执行完后，向所有从服务器发送快照文件，并在发送期间继续记录被执行的写命令；<br/>
 从服务器收到快照文件后丢弃所有旧数据，载入收到的快照；<br/>
 主服务器快照发送完毕后开始向从服务器发送缓冲区中的写命令； <br/>
从服务器完成对快照的载入，开始接收命令请求，并执行来自主服务器缓冲区的写命令；</p>

<p>Redis增量复制是指Slave初始化后开始正常工作时主服务器发生的写操作同步到从服务器的过程。  增量复制的过程主要是主服务器每执行一个写命令就会向从服务器发送相同的写命令，从服务器接收并执行收到的写命令。</p>

<p>vim /etc/redis/6379.conf</p>

<p>logfile &quot;/var/log/redis_6379.log&quot;<br/>
dbfilename dump_6379.rdb<br/>
appendfilename &quot;appendonly_6379.aof&quot;</p>

<p>/etc/init.d/redis stop<br/>
/etc/init.d/redis start<br/>
[root@lb01 tmp]# ls /tmp<br/>
appendonly_6379.aof  appendonly.aof  dump.rdb<br/>
拷贝配置文件并修改<br/>
cd /etc/redis/<br/>
cp 6379.conf 6380.conf<br/>
sed -i &#39;s/6379/6380/g&#39; 6380.conf<br/>
diff 6379.conf 6380.conf </p>

<p>/usr/local/bin/redis-server 6380.conf </p>

<p>[root@lb01 redis]# ps aux |grep redis <br/>
root      59357  0.1  0.7 133544  7524 ?        Ssl  11:42   0:01 /usr/local/bin/redis-server 127.0.0.1:6379<br/><br/>
root      59379  0.0  0.7 133544  7520 ?        Ssl  11:59   0:00 /usr/local/bin/redis-server 127.0.0.1:6380</p>

<p>[root@lb01 redis]# ls /tmp<br/>
appendonly_6379.aof  appendonly_6380.aof  appendonly.aof  dump.rdb<br/>
redis-cli -p 6380<br/>
开启主从复制功能<br/>
127.0.0.1:6380&gt; SLAVEOF 172.16.1.5 6379<br/>
OK<br/>
127.0.0.1:6380&gt; info<br/>
......</p>

<h1 id="toc_0">Replication</h1>

<p>role:slave<br/>
master_host:172.16.1.5<br/>
master_port:6379<br/>
master_link_status:up<br/>
master_last_io_seconds_ago:3<br/>
......<br/>
查看主机状态<br/>
172.16.1.5:6379&gt; info<br/>
......</p>

<h1 id="toc_1">Replication</h1>

<p>role:master<br/>
connected_slaves:1<br/>
slave0:ip=127.0.0.1,port=6380,state=online,offset=169,lag=1<br/>
master_repl_offset:169<br/>
......<br/>
测试主从复制功能<br/>
主库写入<br/>
172.16.1.5:6379&gt; set key test<br/>
OK<br/>
从库查询<br/>
127.0.0.1:6380&gt; keys *<br/>
1) &quot;count&quot;<br/>
2) &quot;key&quot;<br/>
redis cluster集群<br/>
redis本身是单实例单进程的<br/>
参考文档<br/>
<a href="http://www.cnblogs.com/wuxl360/p/5920330.html">http://www.cnblogs.com/wuxl360/p/5920330.html</a> </p>

<p>redis管理工具<br/>
cd /application/nginx/html/blog<br/>
git clone <a href="https://github.com/ErikDubbelboer/phpRedisAdmin.git">https://github.com/ErikDubbelboer/phpRedisAdmin.git</a> <br/>
cd phpRedisAdmin <br/>
git clone <a href="https://github.com/nrk/predis.git">https://github.com/nrk/predis.git</a> vendor<br/>
更改配置文件添加多实例<br/>
/application/nginx/html/blog/phpRedisAdmin/includes<br/>
vim config.sample.inc.php<br/>
......<br/>
$config = array(<br/>
  &#39;servers&#39; =&gt; array(<br/>
    array(<br/>
      &#39;name&#39;   =&gt; &#39;6379&#39;, // Optional name.<br/>
      &#39;host&#39;   =&gt; &#39;172.16.1.5&#39;,<br/>
      &#39;port&#39;   =&gt; 6379,<br/>
      &#39;filter&#39; =&gt; &#39;*&#39;,<br/>
      &#39;scheme&#39; =&gt; &#39;tcp&#39;,<br/>
      &#39;path&#39;   =&gt; &#39;&#39;<br/>
    ),<br/>
    array(<br/>
      &#39;name&#39; =&gt; &#39;6380&#39;,<br/>
      &#39;host&#39; =&gt; &#39;172.16.1.5&#39;,<br/>
      &#39;port&#39; =&gt; 6380<br/>
    ),<br/>
......<br/>
浏览器输入<a href="http://blog.etiantian.org/phpRedisAdmin/%E5%8D%B3%E5%8F%AF%E8%AE%BF%E9%97%AE">http://blog.etiantian.org/phpRedisAdmin/即可访问</a></p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15052921723963.html"  title="Previous Post: 卅二、NTP时间服务">&laquo; 卅二、NTP时间服务</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15051981760993.html" 
	        title="Next Post: Linux下获取公网IP地址的方法">Linux下获取公网IP地址的方法 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15052628837678.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
