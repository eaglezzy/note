<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  十五、awk命令精讲 - 笔记仓库
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="笔记仓库" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">笔记仓库</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 笔记仓库</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>1.老男孩学习笔记</label></li>

          
            <li><a title="卅七、zabbix自主监控与分布式监控" href="15053046720339.html">卅七、zabbix自主监控与分布式监控</a></li>
          
            <li><a title="卅六、zabbix自定义监控" href="15053033256965.html">卅六、zabbix自定义监控</a></li>
          
            <li><a title="卅五、centOS6.9部署zabbix" href="15053026350545.html">卅五、centOS6.9部署zabbix</a></li>
          
            <li><a title="卅三、PPTP实现VPN" href="15052974923145.html">卅三、PPTP实现VPN</a></li>
          
            <li><a title="卅四、openvpn安装与使用" href="15052960182182.html">卅四、openvpn安装与使用</a></li>
          
            <li><a title="卅二、NTP时间服务" href="15052921723963.html">卅二、NTP时间服务</a></li>
          
            <li><a title="卅一、Keepalived部署" href="15051477961930.html">卅一、Keepalived部署</a></li>
          
            <li><a title="三十、Nginx应用--反向代理--负载均衡" href="15051475777273.html">三十、Nginx应用--反向代理--负载均衡</a></li>
          
            <li><a title="廿九、数据库迁移--NFS迁移" href="15051466954965.html">廿九、数据库迁移--NFS迁移</a></li>
          
            <li><a title="廿八、MySQL基本操作" href="15051459212797.html">廿八、MySQL基本操作</a></li>
          
            <li><a title="廿七、单台服务器LNMP搭建" href="15051418147758.html">廿七、单台服务器LNMP搭建</a></li>
          
            <li><a title="廿六、Nginx应用--Web服务" href="15051387894730.html">廿六、Nginx应用--Web服务</a></li>
          
            <li><a title="卌二、KVM" href="15050197248657.html">卌二、KVM</a></li>
          
            <li><a title="卌一、CentOS 7" href="15050196529102.html">卌一、CentOS 7</a></li>
          
            <li><a title="四十、自动化安装 (二) -- cobbler" href="15050165021812.html">四十、自动化安装 (二) -- cobbler</a></li>
          
            <li><a title="卅九、自动批量的安装操作系统 -- kickstart" href="15050152527420.html">卅九、自动批量的安装操作系统 -- kickstart</a></li>
          
            <li><a title="卅八、memcache及session共享" href="15049674009290.html">卅八、memcache及session共享</a></li>
          
            <li><a title="廿五、Nginx入门" href="15047113618478.html">廿五、Nginx入门</a></li>
          
            <li><a title="廿四、网站访问相关命令" href="15046800151297.html">廿四、网站访问相关命令</a></li>
          
            <li><a title="廿三、http协议==超文本传输协议" href="15045988807012.html">廿三、http协议==超文本传输协议</a></li>
          
            <li><a title="廿二、ansible" href="15018692235223.html">廿二、ansible</a></li>
          
            <li><a title="廿一、远程连接" href="15018686711597.html">廿一、远程连接</a></li>
          
            <li><a title="廿十、实时同步服务知识介绍(inotify+rsync)" href="15018676996592.html">廿十、实时同步服务知识介绍(inotify+rsync)</a></li>
          
            <li><a title="十五、awk命令精讲" href="15018659093989.html">十五、awk命令精讲</a></li>
          
            <li><a title="十四、网络基础" href="15018658919010.html">十四、网络基础</a></li>
          
            <li><a title="十三、shell编程入门" href="15018640937342.html">十三、shell编程入门</a></li>
          
            <li><a title="十二、sed命令精讲" href="15018613071828.html">十二、sed命令精讲</a></li>
          
            <li><a title="十一、磁盘管理" href="15018474773088.html">十一、磁盘管理</a></li>
          
            <li><a title="十、用户管理" href="15018399397622.html">十、用户管理</a></li>
          
            <li><a title="九、定时任务" href="15018075128546.html">九、定时任务</a></li>
          
            <li><a title="七、文件属性" href="15017626488369.html">七、文件属性</a></li>
          
            <li><a title="五、Linux基础优化" href="15017614116406.html">五、Linux基础优化</a></li>
          
            <li><a title="八、Linux权限体系" href="15017603199663.html">八、Linux权限体系</a></li>
          
            <li><a title="十九、期中架构NFS知识讲解" href="15013159711138.html">十九、期中架构NFS知识讲解</a></li>
          
            <li><a title="十八、全网备份" href="15013155594594.html">十八、全网备份</a></li>
          
            <li><a title="十七、rsync课程讲解" href="15012425054241.html">十七、rsync课程讲解</a></li>
          
            <li><a title="十六、期中架构" href="15012368281486.html">十六、期中架构</a></li>
          
            <li><a title="六、目录结构" href="15010772533002.html">六、目录结构</a></li>
          
            <li><a title="四、远程连接排错" href="15010763542152.html">四、远程连接排错</a></li>
          
            <li><a title="一、计算机系统硬件核心知识" href="15010712824389.html">一、计算机系统硬件核心知识</a></li>
          
            <li><a title="二、Linux的发展过程与核心知识" href="15010697787307.html">二、Linux的发展过程与核心知识</a></li>
          

      
        <li class="divider"></li>
        <li><label>2.十五个必会的原理知识</label></li>

          
            <li><a title="15. 描述你维护过的大规模集群网站架构的设计原理" href="15010702959683.html">15. 描述你维护过的大规模集群网站架构的设计原理</a></li>
          
            <li><a title="14. 详细描述Linux权限管理体系" href="15010702850667.html">14. 详细描述Linux权限管理体系</a></li>
          
            <li><a title="13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理" href="15010702778892.html">13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理</a></li>
          
            <li><a title="12. 一致性哈西算法作用及原理" href="15010702692268.html">12. 一致性哈西算法作用及原理</a></li>
          
            <li><a title="11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择" href="15010702612275.html">11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择</a></li>
          
            <li><a title="10. Linux默认文件系统,文件删除原理" href="15010702550739.html">10. Linux默认文件系统,文件删除原理</a></li>
          
            <li><a title="09. 详细描述CDN工作原理以及购买服务后解析操作步骤" href="15010702488190.html">09. 详细描述CDN工作原理以及购买服务后解析操作步骤</a></li>
          
            <li><a title="08. keepalive高可用服务工作原理" href="15010702422822.html">08. keepalive高可用服务工作原理</a></li>
          
            <li><a title="07. memcached工作原理(内存管理机制)" href="15010702209182.html">07. memcached工作原理(内存管理机制)</a></li>
          
            <li><a title="06. lvs的4种模式工作原理" href="15010702152705.html">06. lvs的4种模式工作原理</a></li>
          
            <li><a title="05. Nginx配合PHP工作fastcgi工作原理" href="15010702085430.html">05. Nginx配合PHP工作fastcgi工作原理</a></li>
          
            <li><a title="04. MySQL主从同步原理" href="15010701999479.html">04. MySQL主从同步原理</a></li>
          
            <li><a title="03. TCP/IP的三次握手和四次挥手原理" href="15010701936255.html">03. TCP/IP的三次握手和四次挥手原理</a></li>
          
            <li><a title="02. http协议通信原理" href="15010701867065.html">02. http协议通信原理</a></li>
          
            <li><a title="01. DNS系统架构与解析原理" href="15010701752650.html">01. DNS系统架构与解析原理</a></li>
          

      
        <li class="divider"></li>
        <li><label>3.命令总结</label></li>

          
            <li><a title="inotifywait" href="15017603290224.html">inotifywait</a></li>
          
            <li><a title="Linux命令总结 (持续更新中)" href="15013198329902.html">Linux命令总结 (持续更新中)</a></li>
          

      
        <li class="divider"></li>
        <li><label>零散笔记</label></li>

          
            <li><a title="redis简单入门及实现wordpress数据库缓存" href="15052628837678.html">redis简单入门及实现wordpress数据库缓存</a></li>
          
            <li><a title="Linux下获取公网IP地址的方法" href="15051981760993.html">Linux下获取公网IP地址的方法</a></li>
          
            <li><a title="附录: 502和504错误" href="15051451335516.html">附录: 502和504错误</a></li>
          
            <li><a title="HTTP状态码列表" href="15021542293136.html">HTTP状态码列表</a></li>
          
            <li><a title="Ansible常用模块汇总" href="15021011169868.html">Ansible常用模块汇总</a></li>
          
            <li><a title="web服务基础" href="15020372614069.html">web服务基础</a></li>
          
            <li><a title="全网备份案例" href="15010886029579.html">全网备份案例</a></li>
          
            <li><a title="xinetd服务管理器" href="15010578989827.html">xinetd服务管理器</a></li>
          
            <li><a title="服务器简单优化" href="15010516186972.html">服务器简单优化</a></li>
          

      
        <li class="divider"></li>
        <li><label>考试题</label></li>

          
            <li><a title="期中架构之前复习考试" href="15013178849284.html">期中架构之前复习考试</a></li>
          

      
        <li class="divider"></li>
        <li><label>心情随笔</label></li>

          
            <li><a title="鸡汤" href="15050925305457.html">鸡汤</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>1.老男孩学习笔记</span></li>
                        
                          <li><a title="卅七、zabbix自主监控与分布式监控" href="15053046720339.html">卅七、zabbix自主监控与分布式监控</a></li>
                        
                          <li><a title="卅六、zabbix自定义监控" href="15053033256965.html">卅六、zabbix自定义监控</a></li>
                        
                          <li><a title="卅五、centOS6.9部署zabbix" href="15053026350545.html">卅五、centOS6.9部署zabbix</a></li>
                        
                          <li><a title="卅三、PPTP实现VPN" href="15052974923145.html">卅三、PPTP实现VPN</a></li>
                        
                          <li><a title="卅四、openvpn安装与使用" href="15052960182182.html">卅四、openvpn安装与使用</a></li>
                        
                          <li><a title="卅二、NTP时间服务" href="15052921723963.html">卅二、NTP时间服务</a></li>
                        
                          <li><a title="卅一、Keepalived部署" href="15051477961930.html">卅一、Keepalived部署</a></li>
                        
                          <li><a title="三十、Nginx应用--反向代理--负载均衡" href="15051475777273.html">三十、Nginx应用--反向代理--负载均衡</a></li>
                        
                          <li><a title="廿九、数据库迁移--NFS迁移" href="15051466954965.html">廿九、数据库迁移--NFS迁移</a></li>
                        
                          <li><a title="廿八、MySQL基本操作" href="15051459212797.html">廿八、MySQL基本操作</a></li>
                        
                          <li><a title="廿七、单台服务器LNMP搭建" href="15051418147758.html">廿七、单台服务器LNMP搭建</a></li>
                        
                          <li><a title="廿六、Nginx应用--Web服务" href="15051387894730.html">廿六、Nginx应用--Web服务</a></li>
                        
                          <li><a title="卌二、KVM" href="15050197248657.html">卌二、KVM</a></li>
                        
                          <li><a title="卌一、CentOS 7" href="15050196529102.html">卌一、CentOS 7</a></li>
                        
                          <li><a title="四十、自动化安装 (二) -- cobbler" href="15050165021812.html">四十、自动化安装 (二) -- cobbler</a></li>
                        
                          <li><a title="卅九、自动批量的安装操作系统 -- kickstart" href="15050152527420.html">卅九、自动批量的安装操作系统 -- kickstart</a></li>
                        
                          <li><a title="卅八、memcache及session共享" href="15049674009290.html">卅八、memcache及session共享</a></li>
                        
                          <li><a title="廿五、Nginx入门" href="15047113618478.html">廿五、Nginx入门</a></li>
                        
                          <li><a title="廿四、网站访问相关命令" href="15046800151297.html">廿四、网站访问相关命令</a></li>
                        
                          <li><a title="廿三、http协议==超文本传输协议" href="15045988807012.html">廿三、http协议==超文本传输协议</a></li>
                        
                          <li><a title="廿二、ansible" href="15018692235223.html">廿二、ansible</a></li>
                        
                          <li><a title="廿一、远程连接" href="15018686711597.html">廿一、远程连接</a></li>
                        
                          <li><a title="廿十、实时同步服务知识介绍(inotify+rsync)" href="15018676996592.html">廿十、实时同步服务知识介绍(inotify+rsync)</a></li>
                        
                          <li><a title="十五、awk命令精讲" href="15018659093989.html">十五、awk命令精讲</a></li>
                        
                          <li><a title="十四、网络基础" href="15018658919010.html">十四、网络基础</a></li>
                        
                          <li><a title="十三、shell编程入门" href="15018640937342.html">十三、shell编程入门</a></li>
                        
                          <li><a title="十二、sed命令精讲" href="15018613071828.html">十二、sed命令精讲</a></li>
                        
                          <li><a title="十一、磁盘管理" href="15018474773088.html">十一、磁盘管理</a></li>
                        
                          <li><a title="十、用户管理" href="15018399397622.html">十、用户管理</a></li>
                        
                          <li><a title="九、定时任务" href="15018075128546.html">九、定时任务</a></li>
                        
                          <li><a title="七、文件属性" href="15017626488369.html">七、文件属性</a></li>
                        
                          <li><a title="五、Linux基础优化" href="15017614116406.html">五、Linux基础优化</a></li>
                        
                          <li><a title="八、Linux权限体系" href="15017603199663.html">八、Linux权限体系</a></li>
                        
                          <li><a title="十九、期中架构NFS知识讲解" href="15013159711138.html">十九、期中架构NFS知识讲解</a></li>
                        
                          <li><a title="十八、全网备份" href="15013155594594.html">十八、全网备份</a></li>
                        
                          <li><a title="十七、rsync课程讲解" href="15012425054241.html">十七、rsync课程讲解</a></li>
                        
                          <li><a title="十六、期中架构" href="15012368281486.html">十六、期中架构</a></li>
                        
                          <li><a title="六、目录结构" href="15010772533002.html">六、目录结构</a></li>
                        
                          <li><a title="四、远程连接排错" href="15010763542152.html">四、远程连接排错</a></li>
                        
                          <li><a title="一、计算机系统硬件核心知识" href="15010712824389.html">一、计算机系统硬件核心知识</a></li>
                        
                          <li><a title="二、Linux的发展过程与核心知识" href="15010697787307.html">二、Linux的发展过程与核心知识</a></li>
                        

                    
                      <li class="side-title"><span>2.十五个必会的原理知识</span></li>
                        
                          <li><a title="15. 描述你维护过的大规模集群网站架构的设计原理" href="15010702959683.html">15. 描述你维护过的大规模集群网站架构的设计原理</a></li>
                        
                          <li><a title="14. 详细描述Linux权限管理体系" href="15010702850667.html">14. 详细描述Linux权限管理体系</a></li>
                        
                          <li><a title="13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理" href="15010702778892.html">13. 描述Linux下磁盘读写数据的原理，磁盘分区原理，默认文件系统工作原理</a></li>
                        
                          <li><a title="12. 一致性哈西算法作用及原理" href="15010702692268.html">12. 一致性哈西算法作用及原理</a></li>
                        
                          <li><a title="11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择" href="15010702612275.html">11. RAID 0 1 5 10原理、特点、性能区别，集群各角色如何选择</a></li>
                        
                          <li><a title="10. Linux默认文件系统,文件删除原理" href="15010702550739.html">10. Linux默认文件系统,文件删除原理</a></li>
                        
                          <li><a title="09. 详细描述CDN工作原理以及购买服务后解析操作步骤" href="15010702488190.html">09. 详细描述CDN工作原理以及购买服务后解析操作步骤</a></li>
                        
                          <li><a title="08. keepalive高可用服务工作原理" href="15010702422822.html">08. keepalive高可用服务工作原理</a></li>
                        
                          <li><a title="07. memcached工作原理(内存管理机制)" href="15010702209182.html">07. memcached工作原理(内存管理机制)</a></li>
                        
                          <li><a title="06. lvs的4种模式工作原理" href="15010702152705.html">06. lvs的4种模式工作原理</a></li>
                        
                          <li><a title="05. Nginx配合PHP工作fastcgi工作原理" href="15010702085430.html">05. Nginx配合PHP工作fastcgi工作原理</a></li>
                        
                          <li><a title="04. MySQL主从同步原理" href="15010701999479.html">04. MySQL主从同步原理</a></li>
                        
                          <li><a title="03. TCP/IP的三次握手和四次挥手原理" href="15010701936255.html">03. TCP/IP的三次握手和四次挥手原理</a></li>
                        
                          <li><a title="02. http协议通信原理" href="15010701867065.html">02. http协议通信原理</a></li>
                        
                          <li><a title="01. DNS系统架构与解析原理" href="15010701752650.html">01. DNS系统架构与解析原理</a></li>
                        

                    
                      <li class="side-title"><span>3.命令总结</span></li>
                        
                          <li><a title="inotifywait" href="15017603290224.html">inotifywait</a></li>
                        
                          <li><a title="Linux命令总结 (持续更新中)" href="15013198329902.html">Linux命令总结 (持续更新中)</a></li>
                        

                    
                      <li class="side-title"><span>零散笔记</span></li>
                        
                          <li><a title="redis简单入门及实现wordpress数据库缓存" href="15052628837678.html">redis简单入门及实现wordpress数据库缓存</a></li>
                        
                          <li><a title="Linux下获取公网IP地址的方法" href="15051981760993.html">Linux下获取公网IP地址的方法</a></li>
                        
                          <li><a title="附录: 502和504错误" href="15051451335516.html">附录: 502和504错误</a></li>
                        
                          <li><a title="HTTP状态码列表" href="15021542293136.html">HTTP状态码列表</a></li>
                        
                          <li><a title="Ansible常用模块汇总" href="15021011169868.html">Ansible常用模块汇总</a></li>
                        
                          <li><a title="web服务基础" href="15020372614069.html">web服务基础</a></li>
                        
                          <li><a title="全网备份案例" href="15010886029579.html">全网备份案例</a></li>
                        
                          <li><a title="xinetd服务管理器" href="15010578989827.html">xinetd服务管理器</a></li>
                        
                          <li><a title="服务器简单优化" href="15010516186972.html">服务器简单优化</a></li>
                        

                    
                      <li class="side-title"><span>考试题</span></li>
                        
                          <li><a title="期中架构之前复习考试" href="15013178849284.html">期中架构之前复习考试</a></li>
                        

                    
                      <li class="side-title"><span>心情随笔</span></li>
                        
                          <li><a title="鸡汤" href="15050925305457.html">鸡汤</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>十五、awk命令精讲</h1>

<p>[TOC]<br/>
1. # awk基础<br/>
    1. ## awk是什么<br/>
是一个名字怪异的编程语言--查找与处理计算<br/>
    2. ## BEGIN 和 END 模块<br/>
    通常，对于每个输入行，awk 都会执行每个脚本代码块一次。然而，在许多编程情况中， 可能需要在 awk 开始处理输入文件中的文本之前执行初始化代码。对于这种情况，awk 允许 您定义一个 BEGIN 块。我们在前一个示例中使用了 BEGIN 块。因为 awk 在开始处理输入文 件之前会执行 BEGIN 块，因此它是初始化 FS(字段分隔符)变量、打印页眉或初始化其它 在程序中以后会引用的全局变量的极佳位置。<br/>
    awk 还提供了另一个特殊块，叫作 END 块。awk 在处理了输入文件中的所有行之后执行 这个块。通常，END 块用于执行最终计算或打印应该出现在输出流结尾的摘要信息。<br/>
    ## 运算符<br/>
类型<br/>
运算符<br/>
描述<br/>
赋值运算符<br/>
= += -= *= /= %= <sup>=</sup> **=<br/>
赋值语句<br/>
逻辑运算符<br/>
||<br/>
逻辑或</p>

<p>&amp;&amp;<br/>
逻辑与<br/>
正则运算符<br/>
~ !~<br/>
匹配正则表达式和不匹配正则表达式<br/>
关系运算符<br/>
&lt; &lt;= &gt; &gt;= != ==<br/>
关系运算符<br/>
算术运算符<br/>
+-<br/>
加，减</p>

<p>* /&amp;<br/>
乘，除与求余</p>

<p>+-!<br/>
一元加，减和逻辑非</p>

<p>^ ***<br/>
求幂</p>

<p>++ --<br/>
增加或减少，作为前缀或后缀<br/>
其他运算符<br/>
$<br/>
字段引用</p>

<p>空格<br/>
字符串链接符</p>

<p>?:<br/>
三目运算符</p>

<p>In<br/>
数组中是否存在某键值<br/>
    ### awk 赋值运算符<br/>
    a+5;等价于:a=a+5;其他同类<br/>
[root@yum tmp]# awk &#39;BEGIN{a=5;a+=5;print a}&#39;<br/>
10<br/>
    ### awk 逻辑运算符<br/>
[root@yum tmp]# awk &#39;BEGIN{a=1;b=2;print (a&gt;2&amp;&amp;b&gt;1,a=1||b&gt;1)}&#39;<br/>
01<br/>
    ### awk 正则运算符<br/>
[root@yum tmp]# awk &#39;BEGIN{a=&quot;100testaaa&quot;;if(a~/100/){print &quot;ok&quot;}}&#39;<br/>
ok<br/>
[root@yum tmp]# echo|awk &#39;BEGIN{a=&quot;100testaaa&quot;}a~/100/{print &quot;ok&quot;}&#39;<br/>
ok<br/>
    ### 关系运算符<br/>
    如:&gt; &lt; 可以作为字符串比较，也可以用作数值比较，关键看操作数如果是字符串 就会转换为字符串比较。两个都为数字 才转为数值比较。字符串比较:按照ascii 码顺序比较。<br/>
[root@yum tmp]# awk &#39;BEGIN{a=&quot;11&quot;;if(a&gt;=9){print &quot;ok&quot;}}&#39;<br/>
[root@yum tmp]# awk &#39;BEGIN{a=11;if(a&gt;=9){print &quot;ok&quot;}}&#39;<br/>
ok<br/>
[root@yum tmp]# awk &#39;BEGIN{a;if(a&gt;=b){print &quot;ok&quot;}}&#39;<br/>
ok<br/>
    ### awk 算术运算符<br/>
说明，所有用作算术运算符 进行操作，操作数自动转为数值，所有非数值都变为 0。<br/>
[root@yum tmp]# awk &#39;BEGIN{a=&quot;b&quot;;print a++,++a}&#39;<br/>
02<br/>
[root@yum tmp]# awk &#39;BEGIN{a=&quot;20b4&quot;;print a++,++a}&#39;<br/>
20 22<br/>
    ### 其他运算符<br/>
?:三目运算符<br/>
[root@yum tmp]# awk &#39;BEGIN{a=&quot;b&quot;;print a<mark>&quot;b&quot;?&quot;ok&quot;:&quot;err&quot;}&#39;<br/>
ok<br/>
[root@yum tmp]# awk &#39;BEGIN{a=&quot;b&quot;;print a</mark>&quot;c&quot;?&quot;ok&quot;:&quot;err&quot;}&#39;<br/>
err<br/>
in 运算符见后面数组<br/>
    ## 常用 awk 内置变量<br/>
变量名<br/>
属性<br/>
\(0<br/>
当前记录<br/>
\)1~\(n<br/>
当前记录的第 n 个字段<br/>
FS<br/>
输入字段分隔符 默认是空格<br/>
RS<br/>
输入记录分割符 默认为换行符<br/>
NF<br/>
当前记录中的字段个数，就是有多少列<br/>
NR<br/>
已经读出的记录数，就是行号，从 1 开始<br/>
OFS<br/>
输出字段分隔符 默认也是空格<br/>
ORS<br/>
输出的记录分隔符 默认为换行符<br/>
    ## awk正则<br/>
元字符<br/>
功能<br/>
示例<br/>
解释<br/>
^<br/>
行首定位符<br/>
/^root/<br/>
匹配所有以 root 开头的行<br/>
\)<br/>
行尾定位符<br/>
/root\(/<br/>
匹配所有以 root 结尾的行<br/>
.<br/>
匹配任意单个字符<br/>
/r..t/<br/>
匹配字母 r,然后两个任意字符，再以 l 结尾的行，比如 root,r33l 等<br/>
\*<br/>
匹配 0 个或多个前 导字符(包括回车)<br/>
/a\*ool/<br/>
匹配 0 个或多个 a 之后紧跟着 ool 的 行，比如 ool，aaaaool 等<br/>
+<br/>
匹配 1 个或多个前 导字符<br/>
/a+b/<br/>
匹配 1 个或多个 a 加 b 的行，比如 ab,aab 等<br/>
?<br/>
匹配 0 个或 1 个前 导字符<br/>
/a?b/<br/>
匹配 b 或 ab 的行<br/>
\[]<br/>
匹配指定字符组内 的任意一个字符<br/>
/^\[abc]<br/>
匹配以字母 a 或 b 或 c 开头的行<br/>
\[^]<br/>
匹配不在指定字符 组内任意一个字符<br/>
/^\[^abc]/<br/>
匹配不以字母 a 或 b 或 c 开头的行<br/>
()<br/>
子表达式组合<br/>
/(rool)+/<br/>
表示一个或多个 rool 组合，当有一些 字符需要组合时，使用括号括起来<br/>
|<br/>
或者的意思<br/>
/(root)|B/<br/>
匹配 root 或者 B 的行<br/>
\<br/>
转义字符<br/>
/a\\/\\//<br/>
匹配 a//<br/>
\~,!\~<br/>
匹配，不匹配的条件语句<br/>
\)1~/root/<br/>
匹配第一个字段包含字符 root 的所有记录<br/>
x{m} x{m,} X{m,n}<br/>
x 重复 m 次 x 重复至少 m 次 x 重复至少 m 次， 但不超过 n 次 需要指定参数: -posix 或者 --re-interval 没有该参数不能使用该模式<br/>
/(root){3}/ /(root){3,}/ /(root){5,6}/ cat rex.txt smierth,harry smierth,reru robin,tom<br/>
需要注意一点的是，root 加括号和不加括号的区别，x 可以表示字符串也可以只是一个字符，所以/root\{5\}/表示匹配 roo 再加上 5 个 t，及 roottttt /\(root\)\{2,\}/ 则表示匹配 rootrootrootroot 等 awk -posix &#39;/er\{1,2\}/&#39; rex.text smierth,harry smierth,reru<br/>
1. # awk 的 if、循环和数组<br/>
    1. ## 条件语句<br/>
        1. ### awk 提供了非常好的类似于 C 语言的 if 语句。<br/>
{<br/>
    if ( \(1== &quot;foo&quot; ) \{<br/>
        if ( \)2== &quot;foo&quot; ) {<br/>
            print &quot;uno&quot;<br/>
        } else {<br/>
            print &quot;one&quot;<br/>
        }<br/>
    } elseif (\(1== &quot;bar&quot; ) \{<br/>
        print &quot;two&quot;<br/>
    } else \{<br/>
        print &quot;three&quot;<br/>
    }<br/>
}<br/>
    ### 使用 if 语句还可以将代码:<br/>
! /matchme/ \{ print \)1 \(3 \)4 }<br/>
    转换成:<br/>
{<br/>
    if ( \(0 !\~ /matchme/ ) {<br/>
        print \)1 \(3 \)4<br/>
    }<br/>
}<br/>
    ## 循环结构<br/>
    我们已经看到了 awk 的 while 循环结构，它等同于相应的 C 语言 while 循环。awk 还有 &quot;do...while&quot;循环，它在代码块结尾处对条件求值，而不像标准 while 循环那样在开始处<br/>
求值。它类似于其它语言中的&quot;repeat...until&quot;循环。以下是一个示例:<br/>
    do...while 示例<br/>
{  count=1<br/>
    do {<br/>
        print &quot;I get printed at least once no matter what&quot;<br/>
    } while ( count !=1 )<br/>
}<br/>
    与一般的 while 循环不同，由于在代码块之后对条件求值，&quot;do...while&quot;循环永远都至少执行一次。换句话说，当第一次遇到普通 while 循环时，如果条件为假，将永远不执行该循环。<br/>
    ### for 循环<br/>
    awk 允许创建 for 循环，它就象 while 循环，也等同于 C 语言的 for 循环:<br/>
for ( initial assignment; comparison; increment ) {<br/>
    code block<br/>
 }<br/>
    以下是一个简短示例:<br/>
for ( x=1;x&lt;=4;x++ ) {<br/>
    print&quot;iteration&quot;, x<br/>
}<br/>
    此段代码将打印:<br/>
iteration1<br/>
iteration2<br/>
iteration3<br/>
iteration4<br/>
    ### break 和 continue<br/>
    此外，如同 C 语言一样，awk 提供了 break 和 continue 语句。使用这些语句可以更好地 控制 awk 的循环结构。以下是迫切需要 break 语句的代码片断:<br/>
while 死循环<br/>
while (1) {<br/>
    print &quot;forever and ever...&quot;<br/>
}while 死循环 1 永远代表是真，这个 while 循环将永远运行下去。<br/>
以下是一个只执行十次的循环:<br/>
#break 语句示例<br/>
x=1while(1) {  print &quot;iteration&quot;, x<br/>
    if ( x<mark>10 ) {     break<br/>
    }   x++<br/>
}<br/>
    这里，break 语句用于“逃出”最深层的循环。&quot;break&quot;使循环立即终止，并继续执行循 环代码块后面的语句。    continue 语句补充了 break，其作用如下:x=1<br/>
while (1) {<br/>
    if ( x</mark>4 ) {<br/>
        x++<br/>
        continue<br/>
    }<br/>
    print &quot;iteration&quot;, x<br/>
    if ( x&gt;20 ) {<br/>
        break<br/>
    }<br/>
    x++<br/>
}<br/>
    这段代码打印&quot;iteration1&quot;到&quot;iteration21&quot;，&quot;iteration4&quot;除外。如果迭代等于 4，则增加 x 并调用 continue 语句，该语句立即使 awk 开始执行下一个循环迭代，而不执行代码块 的其余部分。如同 break 一样，continue 语句适合各种 awk 迭代循环。在 for 循环主体 中使用时，continue 将使循环控制变量自动增加。以下是一个等价循环:<br/>
for ( x=1;x&lt;=21;x++ ) {<br/>
    if ( x==4 ) {<br/>
        continue<br/>
    }<br/>
    print &quot;iteration&quot;, x<br/>
}<br/>
在 while 循环中时，在调用 continue 之前没有必要增加 x，因为 for 循环会自动增加 x。</p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15018676996592.html"  title="Previous Post: 廿十、实时同步服务知识介绍(inotify+rsync)">&laquo; 廿十、实时同步服务知识介绍(inotify+rsync)</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15018658919010.html" 
	        title="Next Post: 十四、网络基础">十四、网络基础 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15018659093989.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
